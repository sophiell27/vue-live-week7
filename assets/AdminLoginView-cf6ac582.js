import{_ as h,M as f,r as v,a,o as w,c as M,b as e,d as s,w as b,F as x}from"./index-62ca245e.js";const{VITE_API:c,VITE_PATH:I}={VITE_API:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"sophiee22",BASE_URL:"/vue-live-week7/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},P={data(){return{isLoading:!1,fullPage:!0,messageModal:{}}},watch:{isLoading(){setTimeout(()=>{this.isLoading=!1},500)}},methods:{onSubmit(t){this.isLoading=!0,this.$http.post(`${c}admin/signin`,{username:t.email,password:t.password}).then(o=>{const{expired:i,token:l}=o.data;document.cookie=`week7Token=${l};expires=${new Date(i)}`,this.$router.push("/admin"),this.messageModal.showMessage("歡迎回來！")}).catch(o=>{this.messageModal.showMessage("登入錯誤")})}},components:{MessageModalComponent:f},mounted(){this.$http.post(`${c}api/user/check`).then(t=>{v.push("/admin")}),this.messageModal=this.$refs.messageModal,console.log(this.messageModal)}},E={class:"vh-100 d-flex justify-content-center align-items-center"},k={class:"mb-3"},L=s("label",{for:"loginUsername",class:"form-label"},"Email address",-1),T={class:"mb-3"},V=s("label",{for:"loginPassword",class:"form-label"},"Password",-1),$=s("div",{class:"d-flex justify-content-end"},[s("button",{class:"btn btn-primary"}," 登入")],-1);function S(t,o,i,l,n,m){const p=a("loading"),u=a("MessageModalComponent"),r=a("v-field"),d=a("v-error-message"),_=a("v-form");return w(),M(x,null,[e(p,{active:n.isLoading,"onUpdate:active":o[0]||(o[0]=g=>n.isLoading=g),"is-full-page":n.fullPage},null,8,["active","is-full-page"]),e(u,{ref:"messageModal"},null,512),s("div",E,[e(_,{class:"form",onSubmit:m.onSubmit},{default:b(()=>[s("div",k,[L,e(r,{type:"email",class:"form-control",placeholder:"Email address",id:"loginUsername",name:"email",rules:"required|email"}),e(d,{class:"text-danger",name:"email"})]),s("div",T,[V,e(r,{type:"password",class:"form-control",placeholder:"Password",id:"loginPassword",name:"password",rules:"required|min:8"}),e(d,{class:"text-danger",name:"password"})]),$]),_:1},8,["onSubmit"])])],64)}const y=h(P,[["render",S]]);export{y as default};
